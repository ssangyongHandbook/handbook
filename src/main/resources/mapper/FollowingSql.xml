<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTDMapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sns.handbook.mapper.FollowingMapperInter">
	<!-- 팔로잉체크(내기준) -->
	<select id="checkFollowing" resultType="int" parameterType="Map">
		select count(*) from following where from_user=#{from_user} and to_user=#{to_user}
	</select>
	
	<!-- 팔로잉체크(상대기준) -->
	<select id="checkFollower" resultType="int" parameterType="Map">
		select count(*) from following where from_user=#{from_user} and to_user=#{to_user}
	</select>
	
	<!-- 내가 팔로잉한 사람의 수 -->
	<select id="getTotalFollowing" resultType="int" parameterType="String">
		select count(*) from following where from_user=#{from_user}
	</select>
	
	<!-- 나를 팔로우한 사람의 수 -->
	<select id="getTotalFollower" resultType="int" parameterType="String">
		select count(*) from following where to_user=#{to_user}
	</select>
	
	<!-- 내가 팔로우한 사람 리스트 출력 -->
	<select id="getFollowList" parameterType="Map" resultType="FollowingDto">
		select * from following where from_user =#{from_user} limit 2 offset #{offset}
	</select>
	
	<!-- 함께 아는 친구 인원 수 출력 -->
	<select id="togetherFollow" resultType="int" parameterType="Map">
		select count(*) from following where to_user = #{to_user} and from_user in (select to_user from following where from_user = #{from_user} )
	</select>
	
	<!-- 팔로잉하기 -->
	<insert id="insertFollowing" parameterType="FollowingDto">
		insert into following value(null,#{from_user},#{to_user})
	</insert>
	
	<!-- 팔로잉취소 -->
	<delete id="deleteFollowing" parameterType="String">
		delete from following where to_user=#{to_user}
	</delete>
</mapper>